<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dungeon DJ + Escudo do Mestre</title>
  <style>
    :root{
      --bg: #121212;
      --panel: #1e1e1e;
      --muted: #2e2e2e;
      --accent-amb: #28a745;
      --accent-comb: #dc3545;
      --glass: rgba(255,255,255,0.04);
      --text: #ffffff;
      --card-radius: 12px;
    }

    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background:var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      display:flex;
      flex-direction:column;
      align-items:center;
      padding:0;
    }

    /* ---------------- HEADER ---------------- */
    header{
      width:100%;
      max-width:1100px;
      display:flex;
      gap:16px;
      align-items:center;
      justify-content:space-between;
      padding:20px;
    }
    header h1{margin:0;font-size:1.6rem;display:flex;gap:10px;align-items:center}
    .controls {display:flex;gap:10px;flex-wrap:wrap}
    .btn {
      background:linear-gradient(145deg,var(--muted),#1a1a1a);
      color:var(--text);
      border:0;padding:8px 12px;
      border-radius:10px;font-weight:600;
      cursor:pointer;transition:transform .15s ease;
      box-shadow:2px 2px 6px rgba(0,0,0,0.6);
    }
    .btn:active{transform:scale(0.92)}
    .btn-success{box-shadow:0 6px 18px rgba(40,167,69,0.08)}
    .btn-danger{box-shadow:0 6px 18px rgba(220,53,69,0.08)}
    .btn-warning{box-shadow:0 6px 18px rgba(255,193,7,0.06)}
    .btn-info{box-shadow:0 6px 18px rgba(13,202,240,0.06)}

    /* ---------------- LAYOUT ---------------- */
    main{
      width:100%;max-width:1100px;
      display:grid;grid-template-columns: 1fr 340px;
      gap:18px;align-items:start;padding:20px;
    }

    /* √°rea de bot√µes sons */
    .sound-grid{
      background:var(--panel);
      border-radius:var(--card-radius);
      padding:18px;
      box-shadow:2px 2px 12px rgba(0,0,0,0.6);
    }
    .btn-grid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap:14px;justify-items:center;
    }
    .sound-btn{
      width:150px;height:80px;
      border-radius:14px;
      background:linear-gradient(145deg,#2e2e2e,#1a1a1a);
      color:var(--text);
      border:0;cursor:pointer;
      font-size:16px;
      transition:transform .18s ease, box-shadow .18s ease;
    }
    .sound-btn:hover{
      transform:translateY(-4px) scale(1.03);
      box-shadow:0 6px 18px rgba(0,255,150,0.06);
    }

    /* painel lateral */
    aside{
      background:var(--panel);
      border-radius:var(--card-radius);
      padding:14px;
      box-shadow:2px 2px 10px rgba(0,0,0,0.6);
    }
    .side-section{margin-bottom:14px}
    label.file-btn{
      display:inline-flex;gap:8px;align-items:center;
      padding:8px 10px;border-radius:8px;
      background:linear-gradient(145deg,#2a2a2a,#1b1b1b);
      cursor:pointer;font-weight:600;
    }
    input[type="file"]{display:none}
    .url-row{display:flex;gap:8px;margin-top:10px}
    .url-row input[type="text"]{
      flex:1;background:transparent;
      border:1px solid rgba(255,255,255,0.06);
      padding:8px;border-radius:6px;color:var(--text);
    }

    #musicList{
      display:flex;flex-direction:column;gap:10px;
      max-height:420px;overflow:auto;padding-right:6px;
    }
    .player-card{
      background:var(--glass);border-radius:10px;padding:10px;
      display:flex;flex-direction:column;gap:8px;
      cursor:grab;border-left:6px solid transparent;
    }
    .player-card.ambiente{border-left-color:var(--accent-amb)}
    .player-card.combate{border-left-color:var(--accent-comb)}
    .player-top{display:flex;justify-content:space-between;align-items:center}
    .player-top h6{margin:0;font-size:0.95rem}
    .player-controls{display:flex;gap:6px;flex-wrap:wrap}
    .player-controls button{
      background:transparent;
      border:1px solid rgba(255,255,255,0.07);
      color:var(--text);padding:6px 8px;border-radius:6px;cursor:pointer;
    }
    .player-controls input[type="range"]{width:110px}

    /* dados */
    .dice{margin-top:16px;display:flex;flex-direction:column;gap:8px;align-items:center}
    .dice-row{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
    .dice-btn{background:linear-gradient(145deg,#3a3a3a,#222);color:var(--text);border:0;border-radius:10px;padding:10px 14px;cursor:pointer}
    .dice-result{font-size:20px;font-weight:700;min-height:28px}

    /* ESCUDO DO MESTRE */
    .escudo {
      background: #1c1c1c;
      padding: 20px;
      border-top: 3px solid #0f0;
      margin-top:20px;
      width:100%;max-width:1100px;
    }
    .escudo h2 {color: #0f0;margin-bottom:10px}
    .blocos {display:flex;flex-wrap:wrap;gap:15px}
    .bloco {
      background:#222;padding:10px;border-radius:10px;
      width:250px;box-shadow:0 5px 10px rgba(0,0,0,0.5);
    }
    .bloco input.titulo{width:100%;margin-bottom:5px;border:none;border-radius:5px;font-weight:bold;text-align:center;padding:4px}
    .bloco textarea{
      width:100%;height:80px;background:#111;color:#fff;
      border:none;border-radius:5px;padding:5px;resize:none;
    }
    .controles{display:flex;justify-content:space-between;margin-top:5px}
    #addBloco{
      background:#0f0;border:none;color:#111;
      padding:8px 15px;border-radius:8px;cursor:pointer;
      margin-top:10px;font-weight:bold;
    }
    #addBloco:active{transform:scale(0.95)}

    /* responsivo */
    @media(max-width:900px){
      main{grid-template-columns:1fr}
      aside{order:2}
      .sound-grid{order:1}
      header{flex-direction:column;align-items:flex-start}
    }
  </style>
</head>
<body>
  <header>
    <h1>üéº DUNGEON DJ</h1>
    <nav class="controls">
      <button class="btn btn-success" id="ambBtn">üé∂ Ambiente</button>
      <button class="btn btn-danger" id="combBtn">‚öîÔ∏è Combate</button>
      <button class="btn btn-warning" id="listBtn">üìú Lista</button>
    </nav>
  </header>

  <main>
    <!-- Sons -->
    <section class="sound-grid">
      <h2>Bot√µes de Som</h2>
      <div class="btn-grid" id="buttonsContainer"></div>
      <small>Clique em um bot√£o para criar um player da m√∫sica. Use o painel ao lado para adicionar arquivos ou links.</small>
    </section>

    <!-- Lateral -->
    <aside>
      <div class="side-section">
        <label class="file-btn" for="fileInput">üìÇ Adicionar Arquivo</label>
        <input id="fileInput" type="file" accept="audio/*">
        <div class="url-row">
          <input id="urlInput" type="text" placeholder="Cole o link da m√∫sica (https://...)">
          <button class="btn btn-info" id="addUrlBtn">üåê Adicionar</button>
        </div>
      </div>
      <div class="side-section">
        <h3>üìú Lista de M√∫sicas</h3>
        <div id="musicList"></div>
      </div>
      <div class="side-section dice">
        <h3>üé≤ Lan√ßador de Dados</h3>
        <div class="dice-row">
          <button class="dice-btn" data-sides="4">d4</button>
          <button class="dice-btn" data-sides="6">d6</button>
          <button class="dice-btn" data-sides="8">d8</button>
          <button class="dice-btn" data-sides="10">d10</button>
          <button class="dice-btn" data-sides="12">d12</button>
          <button class="dice-btn" data-sides="20">d20</button>
        </div>
        <div id="diceResult" class="dice-result"></div>
      </div>
    </aside>
  </main>

  <!-- Escudo -->
  <div class="escudo">
    <h2>üõ°Ô∏è Escudo do Mestre</h2>
    <div class="blocos" id="blocos"></div>
    <button id="addBloco">+ Adicionar Bloco</button>
  </div>

  <footer style="margin:20px 0;color:#777;text-align:center;font-size:12px">
    Dungeon DJ + Escudo do Mestre ‚Äî HTML unificado
  </footer>

  <script>
    // === DJ ===
    let currentCategory='ambiente';
    const sounds={ambiente:[],combate:[]};
    const buttons=[];
    const buttonsContainer=document.getElementById('buttonsContainer');
    const musicList=document.getElementById('musicList');
    const fileInput=document.getElementById('fileInput');
    const urlInput=document.getElementById('urlInput');
    const addUrlBtn=document.getElementById('addUrlBtn');
    const ambBtn=document.getElementById('ambBtn');
    const combBtn=document.getElementById('combBtn');
    const listBtn=document.getElementById('listBtn');
    const diceResult=document.getElementById('diceResult');

    for(let i=1;i<=9;i++){
      const b=document.createElement('button');
      b.className='sound-btn';b.textContent=`Som ${i}`;
      b.dataset.index=i-1;
      b.onclick=()=>playSound(i-1);
      buttonsContainer.appendChild(b);buttons.push(b);
    }
    ambBtn.onclick=()=>setCategory('ambiente');
    combBtn.onclick=()=>setCategory('combate');
    listBtn.onclick=()=>{document.querySelector('aside').classList.toggle('hidden')};

    function setCategory(cat){currentCategory=cat;updateButtons();renderList();}
    function updateButtons(){buttons.forEach((btn,i)=>{const s=sounds[currentCategory][i];btn.textContent=s?s.name:`Som ${i+1}`})}
    function playSound(i){const s=sounds[currentCategory][i];if(!s)return;createPlayer(s);}
    fileInput.onchange=e=>{const f=e.target.files[0];if(f){addSound(f.name,URL.createObjectURL(f))}}
    addUrlBtn.onclick=()=>{if(urlInput.value){addSound(urlInput.value.split('/').pop(),urlInput.value);urlInput.value=''}}

    function addSound(name,src){if(sounds[currentCategory].length>=9)return alert("Limite atingido");sounds[currentCategory].push({name,src,category:currentCategory});updateButtons();renderList();}
    function createPlayer(sound){
      const card=document.createElement('article');
      card.className='player-card '+sound.category;
      const top=document.createElement('div');top.className='player-top';
      const h=document.createElement('h6');h.textContent=sound.name;top.appendChild(h);
      const audio=document.createElement('audio');audio.src=sound.src;audio.autoplay=true;
      const controls=document.createElement('div');controls.className='player-controls';
      ['‚èØ','üîá','üîÅ','‚ùå'].forEach(icon=>{
        const btn=document.createElement('button');btn.textContent=icon;
        if(icon==='‚èØ')btn.onclick=()=>audio.paused?audio.play():audio.pause();
        if(icon==='üîá')btn.onclick=()=>audio.muted=!audio.muted;
        if(icon==='üîÅ')btn.onclick=()=>audio.loop=!audio.loop;
        if(icon==='‚ùå')btn.onclick=()=>{audio.pause();card.remove()};
        controls.appendChild(btn);
      });
      const vol=document.createElement('input');vol.type='range';vol.min=0;vol.max=1;vol.step=0.01;vol.value=1;vol.oninput=()=>audio.volume=vol.value;
      controls.appendChild(vol);
      card.append(top,controls,audio);
      musicList.prepend(card);
    }
    function renderList(){musicList.innerHTML='';sounds[currentCategory].forEach(s=>createPlayer(s))}
    document.querySelectorAll('.dice-btn').forEach(b=>b.onclick=()=>{diceResult.textContent="üé≤ "+(Math.floor(Math.random()*b.dataset.sides)+1)})

    // === ESCUDO ===
    const blocos=document.getElementById("blocos");
    document.getElementById("addBloco").onclick=()=>{
      const bloco=document.createElement("div");bloco.className="bloco";
      bloco.innerHTML=`<input class="titulo" placeholder="T√≠tulo"><textarea></textarea>
      <div class="controles"><select onchange="this.closest('.bloco').querySelector('textarea').style.fontFamily=this.value">
      <option>Arial</option><option>Courier New</option><option>Georgia</option><option>Times New Roman</option></select>
      <input type="color" onchange="this.closest('.bloco').querySelector('textarea').style.color=this.value">
      <input type="number" value="14" min="10" max="40" onchange="this.closest('.bloco').querySelector('textarea').style.fontSize=this.value+'px'">px</div>`;
      blocos.appendChild(bloco);
    };
  </script>
</body>
</html>
